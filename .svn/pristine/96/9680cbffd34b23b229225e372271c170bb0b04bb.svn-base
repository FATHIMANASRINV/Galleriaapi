{extends file="layout/base.tpl"}
{block name="header"}

{/block}
{block name="body"}



<!-- Start::row-1 -->
<div class="row">
    <div class="col-xl-12">
        <div class="card custom-card">
            <div class="card-body">
                <div class="row justify-content-center">
                    <div class="col-xl-9">
                        <div class="card shadow-none">
                            <div class="card-body p-0 product-checkout">
                                <ul class="nav nav-tabs tab-style-2 d-sm-flex d-block border-bottom border-block-end-dashed justify-content-center" id="myTab1" role="tablist">
                                    <li class="nav-item" role="presentation">
                                        <button class="nav-link active" id="order-tab" data-bs-toggle="tab"
                                        data-bs-target="#order-tab-pane" type="button" role="tab"
                                        aria-controls="confirmed-tab" aria-selected="true"><i
                                        class="ri-number-1 me-2 align-middle fs-12 d-inline-flex align-items-center justify-content-center"></i>Billing</button>
                                    </li>
                                    <li class="nav-item" role="presentation">
                                        <button class="nav-link" id="confirmed-tab" data-bs-toggle="tab"
                                        data-bs-target="#confirm-tab-pane" type="button" role="tab"
                                        aria-controls="confirmed-tab" aria-selected="false"><i
                                        class="ri-number-2 me-2 align-middle fs-12 d-inline-flex align-items-center justify-content-center"></i>Order</button>
                                    </li>
                                    <li class="nav-item" role="presentation">
                                        <button class="nav-link" id="shipped-tab" data-bs-toggle="tab"
                                        data-bs-target="#shipped-tab-pane" type="button" role="tab"
                                        aria-controls="shipped-tab" aria-selected="false"><i
                                        class="ri-number-3 me-2 align-middle fs-12 d-inline-flex align-items-center justify-content-center"></i>Payments</button>
                                    </li>
                                   {*  <li class="nav-item" role="presentation">
                                        <button class="nav-link" id="delivered-tab" data-bs-toggle="tab"
                                        data-bs-target="#delivery-tab-pane" type="button" role="tab"
                                        aria-controls="delivered-tab" aria-selected="false"><i
                                        class="ri-number-4 me-2 align-middle fs-12 d-inline-flex align-items-center justify-content-center"></i>Finished</button>
                                    </li> *}
                                                    <!-- <li class="nav-item" role="presentation">
                                                        <button class="nav-link" id="finished-tab" data-bs-toggle="tab"
                                                            data-bs-target="#finished-tab-pane" type="button" role="tab"
                                                            aria-controls="finished-tab" aria-selected="false"><i
                                                                class="ri-number-5 me-2 align-middle fs-12 d-inline-flex align-items-center justify-content-center"></i>Finished</button>
                                                            </li> -->
                                                        </ul>
                                                        {form_open('','class="theme-form needs-validation" novalidate')}  
                                                        <div class="row">
                                                            <div class="col-xl-8 mx-auto">
                                                                <div class="tab-content  border-0 m-0 m-lg-4" id="myTabContent">
                                                                    <div class="tab-pane fade show active border-0 p-0" id="order-tab-pane" role="tabpanel" aria-labelledby="order-tab-pane" tabindex="0">

                                                                        {if $address_id}
                                                                        <input type="radio" name="checkout_address"
                                                                        id="checkout-existing-address" value="existing-address" {if $smarty.post.checkout_address == 'existing-address' || $smarty.post.checkout_address == ''}  checked{/if}>
                                                                        <label for="checkout-existing-address">{lang('I_want_to_use_an_Existing_Address')}</label>
                                                                        <div class="form-group col-sm-12"  id="existing_address">
                                                                            <div class="field-label">{lang('Available_address')}</div>
                                                                            <select name="address_id" id="address_id" class="form-control">
                                                                                <option value="">{lang('Select_your_Address')}</option>
                                                                                {* {if $address_id==$v.id} selected=""{/if} *}
                                                                                {foreach from=$available_address item=v key=key name=name}
                                                                                <option value="{$v.id}" {set_select('address_id', $v.id,  ($address_id==$v.id))} >{$v.select_address} , {if $v.state_name}{$v.state_name}{else}{$v.state}{/if} , {$v.country_name} </option>
                                                                                {/foreach}
                                                                            </select>
                                                                            {form_error('address_id')}
                                                                        </div>   
                                                                        {/if}
                                                                        {if log_user_id()}
                                                                        <span class="clearfix"></span>
                                                                        <input type="radio" name="checkout_address"
                                                                        id="checkout-new-address" value="new-address" {if $smarty.post.checkout_address == 'new-address'}  checked{/if} >
                                                                        <label for="checkout-new-address">{lang('I_want_use_new_address')}</label>
                                                                        <div class="row check-out"  id="new_address" style="{if $smarty.post.checkout_address != 'new-address'}   display: none;{/if}">
                                                                            <form class="p-4">
                                                                                <h5 class="text-start mb-2">Billing Information</h5>
                                                                                <div class="row">
                                                                                    <div class="col-md-6 mb-3">
                                                                                        <label class="form-label" for="firstName">First name<abbr class="required" title="required">*</abbr></label>
                                                                                        <input type="text" class="form-control" id="first_name" placeholder="" value="{set_value('first_name')}" required="" name="first_name">
                                                                                        <div class="invalid-feedback"></div>
                                                                                        {form_error('first_name')}
                                                                                    </div>
                                                                                    <div class="col-md-6 mb-3">
                                                                                        <label class="form-label" for="lastName">Last name<abbr class="required" title="required">*</abbr></label>
                                                                                        <input type="text" class="form-control" id="last_name" placeholder="" value="{set_value('last_name')}" required="" name="last_name">
                                                                                        <div class="invalid-feedback"> </div>
                                                                                        {form_error('last_name')}
                                                                                    </div>
                                                                                </div>
                                                                                <div class="mb-3">
                                                                                    <label class="form-label" for="address">Address<abbr class="required" title="required">*</abbr></label>
                                                                                    <input type="text" class="form-control" id="address" placeholder="" required="" name="address" value="{set_value('address')}">
                                                                                    <div class="invalid-feedback"></div>
                                                                                    {form_error('address')}
                                                                                </div>
                                                                                <div class="mb-3">
                                                                                    <label class="form-label" for="address">Email<abbr class="required" title="required">*</abbr></label>
                                                                                    <input type="email" class="form-control" id="email" placeholder="" required="" name="email" value="{set_value('email')}">
                                                                                    <!-- <div class="invalid-feedback">{form_error('email')}</div> -->
                                                                                    {form_error('email')}
                                                                                </div>
                                                                                <div class="mb-3">
                                                                                    <label class="form-label" for="mobile">Mobile Number<abbr class="required" title="required">*</abbr></label>
                                                                                    <input type="tel" class="form-control" id="mobile" name="phone" minlength="10" maxlength="10" value="{set_value('phone')}">
                                                                                    <div class="invalid-feedback">{form_error('phone')}</div>
                                                                                </div>
                                                                                <div class="row">
                                                                                    <div class="col-xxl-5 col-md-12 mb-3">
                                                                                        <label class="form-label">District<abbr class="required" title="required">*</abbr></label>
                                                                                        <input type="text"value="{set_value('district')}" name="district" class="form-control">
                                                                                        <div class="invalid-feedback"></div>
                                                                                        {form_error('district')}
                                                                                    </div>
                                                                                    <div class="col-xxl-5 col-md-12 mb-3">
                                                                                        <label class="form-label">City<abbr class="required" title="required">*</abbr></label>
                                                                                        <input type="text"value="{set_value('city')}" name="city" class="form-control">
                                                                                        <div class="invalid-feedback"></div>
                                                                                        {form_error('city')}
                                                                                    </div>
                                                                                    <div class="col-xxl-5 col-md-12 mb-3">
                                                                                        <label class="form-label">Zip<abbr class="required" title="required">*</abbr></label>
                                                                                        <input type="text"value="{set_value('pin_code')}" name="pin_code" class="form-control" minlength="6" maxlength="6">
                                                                                        <div class="invalid-feedback"></div>
                                                                                        {form_error('pin_code')}
                                                                                    </div>
                                                                                </div>
                                                                                <button class="btn btn-primary btn-lg w-100" type="submit" name="add_address" id="add_address" value="add_address">Continue to checkout</button>
                                                                            </form>
                                                                        </div>

                                                                        {/if}
                                                                        <div class="px-4 py-3 border-top border-block-start-dashed d-sm-flex justify-content-end">
                                                                            <button type="button" class="btn btn-primary" id="personal-details-trigger">Next</button>
                                                                        </div>
                                                                    </div>
                                                                    <div class="tab-pane fade border-0 p-0" id="confirm-tab-pane"
                                                                    role="tabpanel" aria-labelledby="confirm-tab-pane" tabindex="0">
                                                                    <div class="p-4">
                                                                        <h5 class="text-start mb-2">Your Order</h5>

                                                                        <div class="product">
                                                                           {foreach $cart_contents as $v}
                                                                           <div class="item flex-wrap">
                                                                            <div class="left flex-wrap gap-2"> <a href="{base_url()}user/inventory/product_details/{$v.enc_id}" class="thumb rounded-3 mb-2"> <img src="{assets_url()}images/products/{$v['options'].img}" alt="" class="rounded-3"> </a>
                                                                                <div class="purchase mb-2">
                                                                                    <h6> <a href="{base_url()}user/inventory/product_details/{$v.enc_id}">{$v.name}</a> </h6>
                                                                                    <div class="d-flex flex-wrap  mt-2">
                                                                                        <div class="product-title fs-12 me-2">Quantity: {$v.qty}</div>
                                                                                    </div>
                                                                                    <span class="price fs-20">{cur_format($v.price)}</span>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        {/foreach}
                                                                    </div>
                                                                    <br>
                                                                    <div class="d-flex justify-content-between ">
                                                                        <span>Total</span> 
                                                                        <span class="fs-20 fw text-primary">{cur_format($cart_total)}</span> 
                                                                    </div>  
                                                                    <div class="d-flex justify-content-between ">
                                                                        <span>Shipping Charge</span> 
                                                                        <span class="fs-20 fw text-primary">{cur_format($shipping_charge)}</span> 
                                                                    </div> 
                                                                    <div class="d-flex justify-content-between ">
                                                                        <span>Subtotal</span> 
                                                                        <span class="fs-20 fw-bold text-primary">{cur_format($cart_total+$shipping_charge)}</span> 
                                                                    </div>
                                                                </div>
                                                                <div class="px-4 py-3 border-top border-block-start-dashed d-sm-flex justify-content-between">
                                                                    <button type="button" class="btn btn-light m-1" id="back-shipping-trigger">Previous</button>
                                                                    <button type="button" class="btn btn-primary m-1" id="payment-trigger">Next</button>
                                                                </div>
                                                            </div>
                                                            <div class="tab-pane fade border-0 p-0" id="shipped-tab-pane" role="tabpanel"
                                                            aria-labelledby="shipped-tab-pane" tabindex="0">
                                                            <div class="p-5">
                                                                <div class="">
                                                                    <h5 class="text-start mb-2">Payments</h5>
                                                                    <p class="mb-4 text-muted fs-13 ms-0 text-start">Lorem Ipsum has been the industry's standard dummy text ever since</p>
                                                                </div>
                                                                <div class="card-pay">
                                                                        <input type="radio" id="payment_method" name="payment_method"class="form-check-input" value="cod" checked="">
                                                                        <label for="age1">COD</label><br><br>
                                                                    <ul class="tabs-menu nav">
                                                                        {* <li class=""><a href="#tab20" class="active" data-bs-toggle="tab"><i class="fa fa-credit-card"></i>COD</a></li> *}
                                                                        <button class="btn btn-primary btn-lg w-100" type="submit" name="checkout_address" id="checkout_address" value="checkout_address">Place  Order</button>
                                                                    </ul>
                                                                       {*<div class="tab-content">
                                                                            <div class="tab-pane border-0 active show" id="tab20">
                                                                                <div class="form-group">
                                                                                    <label class="form-label">CardHolder Name</label>
                                                                                    <input type="text" class="form-control" placeholder="First Name">
                                                                                </div>
                                                                                <div class="form-group">
                                                                                    <label class="form-label">Card number</label>
                                                                                    <div class="input-group">
                                                                                        <input type="text" class="form-control" placeholder="Search for..." aria-label="Search for..." aria-describedby="button-addon2">
                                                                                        <button class="btn btn-primary" type="button" id="button-addon2">
                                                                                            <i class="fab fa-cc-visa"></i> &nbsp;
                                                                                            <i class="fab fa-cc-amex"></i> &nbsp;
                                                                                            <i class="fab fa-cc-mastercard"></i>
                                                                                        </button>
                                                                                    </div>
                                                                                </div>
                                                                                <div class="row">
                                                                                    <div class="col-sm-8">
                                                                                        <div class="form-group">
                                                                                            <label class="form-label">Expiration</label>
                                                                                            <div class="input-group">
                                                                                                <input type="number" class="form-control" placeholder="MM" name="Month">
                                                                                                <input type="number" class="form-control" placeholder="YY" name="Year">
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                    <div class="col-sm-4">
                                                                                        <div class="form-group">
                                                                                            <label class="form-label">CVV <i class="fa fa-question-circle"></i></label>
                                                                                            <input type="number" class="form-control" required="">
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                            <div class="tab-pane border-0" id="tab21">
                                                                                <p class="mt-4">Paypal is easiest way to pay online</p>
                                                                                <p><a href="javascript:void(0);" class="btn btn-primary"><i class="fab fa-paypal"></i> Log in my Paypal</a></p>
                                                                                <p class="mb-0"><strong>Note:</strong> Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. </p>
                                                                            </div>
                                                                            <div class="tab-pane border-0" id="tab22">
                                                                                <p class="mt-4">Bank account details</p>
                                                                                <dl class="card-text">
                                                                                    <dt>BANK: </dt>
                                                                                    <dd> THE UNION BANK 0456</dd>
                                                                                </dl>
                                                                                <dl class="card-text">
                                                                                    <dt>Account number: </dt>
                                                                                    <dd> 67542897653214</dd>
                                                                                </dl>
                                                                                <dl class="card-text">
                                                                                    <dt>IBAN: </dt>
                                                                                    <dd>543218769</dd>
                                                                                </dl>
                                                                                <p class="mb-0"><strong>Note:</strong> Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. </p>
                                                                            </div>
                                                                        </div>*}
                                                                    </div>
                                                                </div>
                                                                <div class="px-4 py-3 border-top border-block-start-dashed d-sm-flex justify-content-between">
                                                                    <button type="button" class="btn btn-light m-1" id="back-personal-trigger">Previous</button>
                                                                    {* <button type="button" class="btn btn-primary m-1" id="continue-payment-trigger" name="cod">Next</button> *}
                                                                </div>
                                                            </div>
                                                        
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            {form_close()}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            {/block}
            {block name="footer"}
            <script type="text/javascript">
                $(function() { 
                    $("[name=checkout_address]").click(function(){
                        var inputValue = $(this).attr("value");
        // console.log(inputValue);
                        if(inputValue=="new-address")
                        {
                            $("#existing_address").hide('slow');
                            $("#new_address").show('slow');

                        }
                        else if(inputValue=="existing-address")
                        {
                            $("#existing_address").show('slow');
                            $("#new_address").hide('slow');

                        }
                    });
                });
            </script>
            {/block}