<div class="modal-header">
    <h4 class="modal-title" id="myLargeModalLabel">{lang('Edit_Category')}</h4>
    <button class="btn-close" type="button" data-bs-dismiss="modal" aria-label="Close"></button>
</div>

{form_open_multipart('','id="edit-form" class="needs-validation" novalidate=""')}
<div class="modal-body">

    <div class="form-group mb-3">

        <input type="hidden" name="id" id="id" required value="{$details['id']}">
        <input type="hidden" name="submit" value="update">

        <div class="col-sm-12">
            <input class="form-control" type="text" name="category_name" id="category_name" placeholder="{lang('Category_Name')}" required autocomplete="off" value="{$details['category_name']}">
        </div>
    </div>
    
    <div class="col-sm-12">
        <input class="form-check-input" id="gridCheck" type="checkbox" {if $details['parent']!=0}checked="on" value="on"{else}value="off"{/if} name="sub_category" >
        <label class="form-check-label" for="gridCheck">{lang('Sub_category')}</label>
        <input type="hidden" name="check" value=" {$details['parent']}" id="check">
    </div>

    <div class="form-group mb-3" id="cat">
       <div class="col-sm-12">
        <select class="category_async form-control"  name="category"  > 
            {if $details['parent']}
            <option value="{$details['parent']}">{$details['parent_name']}</option>
            {/if} 

        </select> 
        {form_error("parent_name")} 
    </div>
</div> 
<div class="form-group mb-3">

    <div class="col-sm-12">
       
          <textarea class="form-control "  name="description" placeholder="{lang('Description')}"  id="validationTextarea"
                  placeholder="Required example textarea" required="">{$details['description']}</textarea>
    </div>
</div>
<div class="form-group mb-3">
    <div class="col-sm-12">
        <input class="form-control" type="text" placeholder="Main Item Code" name="main_item_code" id="main_item_code" required autocomplete="off" value="{$details['main_item_code']}">
    </div>
</div>
<div class="form-group mb-3">

    <div class="col-sm-12">
        <input class="form-control" type="number" placeholder="{lang('Sort_Order')}" name="sort_order" id="sort_order" required autocomplete="off" value="{$details['sort_order']}">
    </div>
</div>



<div class="form-group mb-3">

    <div class="col-sm-12">
        <input class="form-control" type="URL" placeholder="{lang('Slug_url')}" name="slug_url" id="slug_url" required autocomplete="off" value="{$details['slug']}">
    </div>
</div>

<div class="col-sm-6">
    <label class="form-label">Image</label>                     
    <div class="fileupload fileupload-new " data-provides="fileupload">
        <div class="fileupload-preview thumbnail border">
            <img src="{assets_url('images/category/')}{$details['image']}" alt="">
        </div>
        <div>
            <span class="btn btn-secondary btn-file" >
                <span class="fileupload-new">Select Image</span>
                <span class="fileupload-exists">{lang('change')}</span>
                <input type="file" name="userfile">
            </span>
            <a href="#" class="btn btn-outline-dark me-1 mb-1 fileupload-exists" data-dismiss="fileupload">{lang('remove')}</a>
        </div>
    </div>
</div>
</div>
<div class="modal-footer"> 
    <button class="btn btn-light btn-air-light" type="button" data-bs-dismiss="modal" data-bs-original-title="" title="">{lang('Close')}</button>
    <button class="btn btn-info btn-air-primary update-category" type="submit" name="edit" id="edit" value="Submit" >{lang('text_update')}</button>
</div>
{form_close()}   

<script type="text/javascript">


    $('.category_async').select2({

        placeholder: 'Select a Category',
        dropdownParent: $('#modal-product-edit'),
        ajax: {
            url:'{base_url()}{log_user_type()}/autocomplete/product_categories',

            type: 'post',
            dataType: 'json',
            delay:250,
            processResults: function(data) {
                return {
                    results: data
                };
            }
        },
    }); 
     var descriptionEdit;
    var editor = ClassicEditor
    .create( document.querySelector( '.ckeditor' ) )
    .then( editor => {
        window.editor = editor;
        descriptionEdit = editor;

    } )
    .catch( error => {
        console.error( error );
    } );


    $(document).ready(function() {
        $('input[type="checkbox"]').click(function() {
            var inputValue = $(this).attr("value");
            $('#cat').toggle();
        });
        var checkbox=$("#check").val();
       if(checkbox==0)
       {
         $('#cat').hide();
       }
    });

</script>
