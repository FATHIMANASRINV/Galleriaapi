<?php defined('BASEPATH') OR exit('No direct script access allowed');

class Tools extends Base_Controller {

	function __construct()
	{
		parent::__construct(); 	
	}

	public function news()
	{   
		$data['title'] = lang('text_news_management');
		$data['sub_title'] =  lang('text_news_management');
		$news_details = $this->Tools_model->getToolsDetails('','news');
		$data['news_details'] =   $news_details;
		$this->loadView($data);
	}
	public function news_details($id='')
	{   
		$data['title'] = lang('text_news_details');
		$id = $this->Base_model->encrypt_decrypt('decrypt',$id);
		$news_details = [];
		if($id){
			$news_details = $this->Tools_model->getToolsDetails($id,'news');
			$more_news = $this->Tools_model->getToolsDetails('','news',5,$news_details[0]['start_date']);

			
			$data['more_news'] =   $more_news;
		}
		$data['news_details'] =   $news_details;
		$layout = null;
		if($news_details)
		{
			$layout = "layout/base.tpl";
		}else{
			$layout = "login/layout.tpl";
		}

		$data['layout'] =   $layout;
		$this->loadView($data);
	}
	function events()
	{   
		$appointments = array();
		$appointments = $this->Tools_model->getToolsDetails('','events');
		$data['title'] = lang('text_event_management');
		$data['appointments'] =   $appointments;
		$this->loadView($data);
	}
	public function events_details($id='')
	{   
		$appointments = array();
		$id = $this->Base_model->encrypt_decrypt('decrypt',$id);
		$upcoming_events=[];
		if($id){
			$appointments = $this->Tools_model->getToolsDetails($id,'events');
			$upcoming_events = $this->Tools_model->getToolsDetails('','events',5,$appointments[0]['start_date']);
			$data['title'] = lang('text_event_details');
			$data['appointments'] =   $appointments;
		}
		$data['upcoming_events'] =   $upcoming_events;
		$layout = null;
		if($upcoming_events)
		{
			$layout = "layout/base.tpl";
		}else{
			$layout = "login/layout.tpl";
		}

		$data['layout'] =   $layout;
		$this->loadView($data);
	}
	function docs()
	{	
		$data['title'] = lang('text_download_efiles');
		$data['sub_title'] =  lang('text_download_efiles');	  
		$efile_details = $this->Tools_model->getToolsDetails('','efiles');
		$data['efile_details'] =   $efile_details;
		$this->loadView($data);
	}
	public function news_empty($type='')
	{   
		$data['type']=$type;
		$data['title'] = lang('no_news_found');
		$this->loadView($data);
	}
}