{extends file="layout/base.tpl"}
{block name="header"}
<link rel="stylesheet" type="text/css" href="{assets_url('plugins/sweetalert/lib/sweet-alert.css')}">

{/block}
{block name="body"} 
<div style="display:none;">
    <span id="base_url">{base_url()}</span>
    <span id="text_are_you_sure">{lang('text_are_you_sure')}</span>
    <span id="text_you_will_not_recover">{lang('text_you_will_not_recover')}</span>
    <span id="text_yes_delete_it">{lang('text_yes_delete_it')}</span>
    <span id="text_no_cancel_please">{lang('text_no_cancel_please')}</span>
    <span id="text_deleted">{lang('text_deleted')}</span>
    <span id="text_news_deleted">{lang('text_news_deleted')}</span>
    <span id="text_cancelled">{lang('text_cancelled')}</span>
    <span id="text_news_safe">{lang('text_news_safe')}</span>
    <span id="text_you_want_edit_news">{lang('text_you_want_edit_news')}</span>
    <span id="text_yes_edit_it">{lang('text_yes_edit_it')}</span>
    <span id="error_the_fieldid_field_is_required">{lang('error_the_fieldid_field_is_required')}</span>
    <span id="error_atleast_number">{lang('error_atleast_number')}</span>
    <span id="error_enter_greater_number">{lang('error_enter_greater_number')}</span>
</div>
<div class="heading-elements">
   <a href="{base_url()}admin/tools/add-event/" class="btn btn-outline-theme mr-1 mb-1" title=""><i class="fa fa-plus"></i></a>
</div>

<div class="row">
    <div class="col-lg-12 col-md-12 col-xs-12">
        <div class="card">
            <div class="card-header ">
                <h6 class="card-title">
                    <i class="fa fa-bars" > 
                    </i>
                    {lang('text_view_event')}
                    
                </h6> 
            </div>
            <div class="card-body">
                {if $appointments}

                <div class="table-responsive">
                    <table class="table table-hover" id="sample-table-1">
                        <thead>
                            <tr>
                                <th class="center">#</th>
                                <th >{lang('text_subject')}</th>
                                {* <th>{lang('text_content')}</th> *}
                                <th class="hidden-xs">{lang('text_start_date')}</th>
                                <th >{lang('text_end_date')}</th>
                                <th >{lang('location')}</th>
                                <th >{lang('address')}</th>
                                <th >{lang('image')}</th>
                                <th class="center">{lang('text_actions')}</th>
                            </tr>
                        </thead>
                        <tbody>
                            {foreach $appointments as $v} 
                            {* {$i=$i+1} *}

                            <tr>
                                <td class="center">{counter}</td>
                                <td >{$v.title}</td>
                                {* <td  >{$v.content}</td> *}
                                <td class="hidden-xs" >{$v.start_date}</td>
                                <td >{$v.end_date}</td>
                                <td >{$v.location}</td>
                                <td >{$v.address}</td>

                                <td class="hidden-xs"><img {if $v.image}src="{assets_url()}/images/event_images/{$v.image}
                                    "{else}src="{assets_url()}/images/profile/bg.jpg"{/if} width="75" height="75"></td>
                                    <td class="center">
                                        <div class="visible-md visible-lg hidden-sm hidden-xs">

                                          {*   <a class="btn btn-primary" data-placement="top" title="{lang('text_edit')}"  href="event_management/edit/{$v.id}" ><i class="fas fa-edit"></i></a>

                                          <a class="btn btn-primary delete-row" data-placement="top" title="{lang('text_delete')}" data-srcid="{$v.id}" href="event_management/delete/{$v.id}"><i class="fa fa-trash fa fa-white"></i></a> *}
                                          <a href="javascript:edit_events({$v.id})"  data-placement="top" title="{lang('text_edit')}"><i class="fas fa-edit"></i></a>

                                          <a  href="javascript:inactivate_events({$v.id})" data-placement="top" title="{lang('text_deactivate')}"><i class="fas fa-trash text-danger"></i></a>
                                      </div>
                                      <div class="visible-xs visible-sm hidden-md hidden-lg">
                                        <div class="btn-group">
                                            {*     <a class="btn btn-green" data-toggle="dropdown" href="#">
                                                    <i class="fa fa-cog"></i> <span class="caret"></span>
                                                </a> *}
                                                <ul role="menu" class="dropdown-menu pull-right dropdown-dark">
                                                    <li>
                                                        <a role="menuitem" tabindex="-1" class="edit-row" data-srcid="{$v.id}" data-srcLink="events/event-management/edit" >
                                                            <i class="fas fa-edit"></i> {lang('text_edit')}
                                                        </a>
                                                    </li>
                                                    <li>
                                                        <a role="menuitem" tabindex="-1" class="delete-row" data-srcid="{$v.id}" data-srcLink="events/event-management/delete">
                                                            <i class="fas fa-trash"></i> {lang('text_delete')}
                                                        </a>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </td>
                                </tr>
                                {/foreach}

                            </tbody>
                        </table>
                    </div>
                    {else}
                    <div class="alert alert-block alert-warning fade in">
                        <p>
                            <h3 class="text-center"> 
                                <i class="fa fa-exclamation"> {lang('text_no_transfer_details_found')}</i>
                            </h3>
                        </p>
                    </div>
                    {/if}
                </div>
            </div>
        </div>
    </div>
    {/block}

    {block name="footer"}
    <script>



        function edit_events(id)
        {
            swal({
                title: $("#text_are_you_sure").html(),
                text: $("#text_you_want_edit_news").html(),
                type: "warning",
                showCancelButton: true,
                confirmButtonColor: "#DD6B55",
                confirmButtonText: $("#text_yes_edit_it").html(),
                cancelButtonText: $("#text_no_cancel_please").html(),
                closeOnConfirm: false,
                closeOnCancel: false
            },
            function (isConfirm) {
                if (isConfirm) {
                    document.location.href = rootPath + "admin/tools/add-event/"+id; 
                } else {
                    swal($("#text_cancelled").html(),$("#text_news_safe").html(), "error");
                }
            });

        }
        function inactivate_events(id)
        {
            swal({
                title: $("#text_are_you_sure").html(),
                text: $("#text_you_will_not_recover").html(),
                type: "warning",
                showCancelButton: true,
                confirmButtonColor: "#DD6B55",
                confirmButtonText: $("#text_yes_delete_it").html(),
                cancelButtonText: $("#text_no_cancel_please").html(),
                closeOnConfirm: false,
                closeOnCancel: false
            },
            function (isConfirm) {
                if (isConfirm) {
                  document.location.href = rootPath + "admin/tools/event-management/"+id; 




              } else {
                swal($("#text_cancelled").html(),$("#text_news_safe").html(), "error");
            }
        });

        }

    </script>
    <script src="{assets_url('plugins/sweetalert/lib/sweet-alert.min.js')}"></script>
    <script src="{assets_url('js/confirm.js')}"></script>

    <script src="{assets_url('plugins/ckeditor/ckeditor.js')}"></script>
    <script src="{assets_url('plugins/ckeditor/adapters/jquery.js')}"></script>

    {/block}
