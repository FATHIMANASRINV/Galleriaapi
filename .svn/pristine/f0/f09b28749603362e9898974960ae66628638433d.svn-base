{extends file="layout/base.tpl"}
{block name="header"}
{* <link rel="stylesheet" href="{assets_url()}backend/libs/quill/quill.snow.css">
<link rel="stylesheet" href="{assets_url()}backend/libs/quill/quill.bubble.css"> *}
<link href="{assets_url()}plugins/select2/select2.min.css" rel="stylesheet" />
<script>
  var isRTL = JSON.parse(localStorage.getItem('isRTL'));
  if (isRTL) {
    var linkDefault = document.getElementById('style-default');
    var userLinkDefault = document.getElementById('user-style-default');
    linkDefault.setAttribute('disabled', true);
    userLinkDefault.setAttribute('disabled', true);
    document.querySelector('html').setAttribute('dir', 'rtl');
} else {
    var linkRTL = document.getElementById('style-rtl');
    var userLinkRTL = document.getElementById('user-style-rtl');
    linkRTL.setAttribute('disabled', true);
    userLinkRTL.setAttribute('disabled', true);
}
</script>
{/block}
{block name="body"} 
{form_open_multipart('','id="news_update_form" class="card needs-validation" novalidate=""')}
<div class="card h-100">

    <div class="mailbox">
        <div class="mailbox-toolbar">
            <div class="mailbox-toolbar-item"><span class="mailbox-toolbar-text">New Message</span></div>
        </div>

        <div class="mailbox-body">
            <div class="mailbox-content">

                <div data-scrollbar="true" data-height="100%">
                    <div class="mailbox-form">

                        <div class="mailbox-form-header">
                            <div class="row mb-2">
                                <label class="col-form-label w-100px px-2 fw-500 text-lg-end">To:</label>
                                <div class="col-lg">
                                    <input class="form-control border-0 rounded-0 outline-none px-card" id="email-to" type="text" aria-describedby="email-to" placeholder="{lang('user_name')}" name="user_name" value="admin"  required />
                                    <div class="invalid-feedback">{lang('user_name_is_required')}</div>

                                    {form_error("user_name")}
                                </div>
                            </div>

                            <div class="row mb-0">
                                <label class="col-form-label w-100px px-2 fw-500 text-lg-end">Subject:</label>
                                <div class="col-lg">
                                    <input type="text" class="form-control" placeholder="Email subject" id="subject" name="subject"  placeholder="{lang('subject')}" {if $mail_details}value="{$mail_details['subject']}"{/if} required>
                                    <div class="invalid-feedback">{lang('subject_is_required')}</div>

                                    {form_error("subject")}
                                </div>
                            </div>
                        </div>
                        <input type="hidden" name="content"  class="content"id="content" >
                        <textarea name="text" class="summernote form-control" title="Contents" rows="10">{$mail_details['message']}</textarea>
                        
                    </div>
                </div>
                
            </div>
        </div>

        <div class="mailbox-toolbar">
            <div class="d-flex align-items-center">
                <button class="btn btn-theme btn-sm px-5 me-2" type="submit" name="send" value="send" id="send">{lang('send')}</button>
                <input class="d-block" id="email-attachment" name="attachment" id="attachment"type="file" />
                <input type="text" name="attachments" {if $mail_details}value="{$mail_details['attachment']}"{/if} hidden>
                <span style="color:red;font-size:13px">Max Allowed Size 1000Kb</span>

                <label class="me-2 btn btn-light btn-sm mb-0 cursor-pointer" for="email-attachment" data-bs-toggle="tooltip" data-bs-placement="top" title="Attach files"><span class="fas fa-paperclip fs-6" data-fa-transform="down-2"></span></label>
                <input class="d-none" id="email-image" type="file" accept="image/*" />

                <button class="btn btn-light btn-sm" type="button" data-bs-toggle="tooltip" data-bs-placement="top" id="delete" title="Delete"> <span class="fas fa-trash"></span></button>
            </div>
        </div>
    </div>



    <div class="card-arrow">
        <div class="card-arrow-top-left"></div>
        <div class="card-arrow-top-right"></div>
        <div class="card-arrow-bottom-left"></div>
        <div class="card-arrow-bottom-right"></div>
    </div>
</div>
{form_close()}
{/block}
{block name="footer"}
<script src="{assets_url()}backend/js/demo/email-compose.demo.js"></script>
<script type="text/javascript">
    $(document).ready(function(){

       var handleSummernote = function() {
        $('.summernote').summernote({
            height: 300
        });
    };  handleSummernote();

    $('#delete').bind('focus', function() {
       $('#email-attachment').val(''); 
   }) ;
    $("#news_update_form").on("submit",function(e) {
        var content = $(".note-editable").html();
        if (content != '<p><br></p>') {
            $(".content").val(content);
        }
        
    });
});
</script>
<script src="{assets_url()}plugins/select2/select2.min.js"></script>
{/block}